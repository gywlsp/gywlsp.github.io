{"componentChunkName":"component---src-templates-blog-post-index-tsx","path":"/boj/2042/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://gywlsp.github.io"}},"markdownRemark":{"id":"7a941804-0107-5d6c-90d7-df2e78fdf0ea","excerpt":"이 글은 백준 2042번 구간 합 구하기를 풀이한다. 코드는 javascript로 작성하였다. 문제 어떤 N개의 수가 주어져 있다. 그런데 중간에 수의 변경이 빈번히 일어나고 그 중간에 어떤 부분의 합을 구하려 한다. 만약에 1,2,3,4,5 라는 수가 있고, 3번째 수를…","html":"<blockquote>\n<p>이 글은 <a href=\"(https://www.acmicpc.net/problem/2042)\">백준 2042번 구간 합 구하기</a>를 풀이한다. 코드는 javascript로 작성하였다.</p>\n</blockquote>\n<h1 id=\"문제\" style=\"position:relative;\">문제<a href=\"#%EB%AC%B8%EC%A0%9C\" aria-label=\"문제 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>어떤 N개의 수가 주어져 있다. 그런데 <strong><u>중간에 수의 변경이 빈번히 일어나고 그 중간에 어떤 부분의 합을 구하려 한다</u></strong>. 만약에 1,2,3,4,5 라는 수가 있고, 3번째 수를 6으로 바꾸고 2번째부터 5번째까지 합을 구하라고 한다면 17을 출력하면 되는 것이다. 그리고 그 상태에서 다섯 번째 수를 2로 바꾸고 3번째부터 5번째까지 합을 구하라고 한다면 12가 될 것이다.</p>\n<h2 id=\"입력\" style=\"position:relative;\">입력<a href=\"#%EC%9E%85%EB%A0%A5\" aria-label=\"입력 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>첫째 줄에 <strong>수의 개수 N(1 ≤ N ≤ 1,000,000)</strong>과 <strong>M(1 ≤ M ≤ 10,000)</strong>, <strong>K(1 ≤ K ≤ 10,000)</strong> 가 주어진다. M은 수의 변경이 일어나는 횟수이고, K는 구간의 합을 구하는 횟수이다. 그리고 둘째 줄부터 N+1번째 줄까지 N개의 수가 주어진다. 그리고 N+2번째 줄부터 N+M+K+1번째 줄까지 세 개의 정수 a, b, c가 주어지는데, <strong>a가 1인 경우 b(1 ≤ b ≤ N)번째 수를 c로</strong> 바꾸고 <strong>a가 2인 경우에는 b(1 ≤ b ≤ N)번째 수부터 c(b ≤ c ≤ N)번째 수까지의 합을 구하여 출력</strong>하면 된다.</p>\n<p>입력으로 주어지는 모든 수는 -2^63보다 크거나 같고, 2^63-1보다 작거나 같은 정수이다.</p>\n<h3 id=\"예제-입력-1\" style=\"position:relative;\">예제 입력 1<a href=\"#%EC%98%88%EC%A0%9C-%EC%9E%85%EB%A0%A5-1\" aria-label=\"예제 입력 1 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">5</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span>\n<span class=\"token number\">1</span>\n<span class=\"token number\">2</span>\n<span class=\"token number\">3</span>\n<span class=\"token number\">4</span>\n<span class=\"token number\">5</span>\n<span class=\"token number\">1</span> <span class=\"token number\">3</span> <span class=\"token number\">6</span>\n<span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">5</span>\n<span class=\"token number\">1</span> <span class=\"token number\">5</span> <span class=\"token number\">2</span>\n<span class=\"token number\">2</span> <span class=\"token number\">3</span> <span class=\"token number\">5</span></code></pre></div>\n<h2 id=\"출력\" style=\"position:relative;\">출력<a href=\"#%EC%B6%9C%EB%A0%A5\" aria-label=\"출력 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><strong><u>첫째 줄부터 K줄에 걸쳐 구한 구간의 합을 출력</u></strong>한다. 단, 정답은 -2^63보다 크거나 같고, 2^63-1보다 작거나 같은 정수이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">17</span>\n<span class=\"token number\">12</span></code></pre></div>\n<h2 id=\"제한\" style=\"position:relative;\">제한<a href=\"#%EC%A0%9C%ED%95%9C\" aria-label=\"제한 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li><strong>시간: 2초</strong></li>\n<li>메모리: 256MB</li>\n</ul>\n<h1 id=\"풀이\" style=\"position:relative;\">풀이<a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"풀이 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<h2 id=\"접근\" style=\"position:relative;\">접근<a href=\"#%EC%A0%91%EA%B7%BC\" aria-label=\"접근 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이 문제에서는 주어진 구간의 숫자 합을 출력해야 한다. 그렇기 때문에 저장된 자료들을 적절히 전처리해 그들에 대한 질의들을 빠르게 대답할 수 있도록 하는 <strong><u>구간 트리를 이 문제에 이용하기 적합</u></strong>하다.</p>\n<p>구간 트리의 기본적인 아이디어는 주어진 <strong><u>배열의 구간들을 표현하는 이진 트리</u></strong>를 만드는 것이다. 이때 구간 트리의 <strong>루트는 항상 배열의 전체 구간 [0, n-1]을 표현</strong>하며, <strong>한 트리의 왼쪽 자식과 오른쪽 자식은 각각 해당 구간의 왼쪽 반과 오른쪽 반을 표현</strong>한다. 길이가 1인 구간을 표현하는 노드들은 구간 트리의 리프가 된다.</p>\n<p>다음 그림은 예제 입력처럼 길이가 5인 배열을 표현하는 구간 트리가 나타내는 구간들이다. <strong>구간 트리의 각 노드는 해당 구간에 대한 계산 결과를 저장</strong>해 둔다. <strong>이 문제에서는 <u>구간의 숫자 합을 각 노드에 저장</u></strong>한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7482ba4da3afdd25cef99f305e48223e/39148/boj_2042_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABoUlEQVQoz41T23KjMAzl//+q+7DTbjYlEAjXGIdbwgKBDRQCqTlrO23SdtJuNaOxZPkcS7KsTNOEzxRCudj1iGec5avzQpXbRAyMMUlQlHvcr9ZIs1z6cp/Hv00o5C97yeY04u63ATc/4sfcxHDs5P6epzt9kq3ykax7eoK6jhBGMbZJgg2l2IShXIUfRRFmfohD095swZWQB0WfHi0CM67xoDvoh1GCxnGQ63B6xmzpwIgqaA6R59mZ9T2hkPY4YJHsoZs2FjaBZTtYhjv4fyoZz5oORlpiZTnQ3ACrlYU53SKpmnNvr4TCO0G1fOh+jKVpyQOu53E/wcLdoChKqHYAldsav1CI5bjQyVZW1HXdpXxF3n4E7s01SFJgxkEiXOQ5NJJC80LkeYGlt4Eb5/BpLMFhnEIPdpKw7/srYc/Z5y7FfKEhDQP8fNSh8qYz/sJVWeBQn0tumwOybcpB7HU8UeYZurZ59ziK4VH88naYOTEIDWHQDE5cIuA23gzzxX4Dxo1hV6q6hmHZIAGVqfskgOuv0bbtZZAvADb996f8Ax6HShVGPBH0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"boj_2042_1\"\n        title=\"boj_2042_1\"\n        src=\"/static/7482ba4da3afdd25cef99f305e48223e/fcda8/boj_2042_1.png\"\n        srcset=\"/static/7482ba4da3afdd25cef99f305e48223e/12f09/boj_2042_1.png 148w,\n/static/7482ba4da3afdd25cef99f305e48223e/e4a3f/boj_2042_1.png 295w,\n/static/7482ba4da3afdd25cef99f305e48223e/fcda8/boj_2042_1.png 590w,\n/static/7482ba4da3afdd25cef99f305e48223e/efc66/boj_2042_1.png 885w,\n/static/7482ba4da3afdd25cef99f305e48223e/c83ae/boj_2042_1.png 1180w,\n/static/7482ba4da3afdd25cef99f305e48223e/39148/boj_2042_1.png 2876w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"알고리즘\" style=\"position:relative;\">알고리즘<a href=\"#%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98\" aria-label=\"알고리즘 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"1-구간-트리-생성\" style=\"position:relative;\">[1] 구간 트리 생성<a href=\"#1-%EA%B5%AC%EA%B0%84-%ED%8A%B8%EB%A6%AC-%EC%83%9D%EC%84%B1\" aria-label=\"1 구간 트리 생성 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>먼저 구간 트리 <code class=\"language-text\">rangeSum</code>을 배열로 만들어 <strong>각 구간의 숫자 합을 저장</strong>해야 한다. 모든 숫자를 안전하게 저장하려면 배열의 길이를 N을 가장 가까운 2의 거듭제곱으로 올림한 뒤 2를 곱한 수로 설정하면 되는데, 간단하게 <strong>배열의 크기를 4N으로 설정</strong>해도 된다.</p>\n<p>그 후 <code class=\"language-text\">init()</code> 함수를 이용해 <strong><u>각 구간의 숫자 합을 재귀적으로 구한 후 구간 트리에 저장</u></strong>한다. 구간 트리에 각 노드가 나타내는 구간은 저장하지 않는데, 이는 해당 노드를 찾아가는 과정에서 표현하는 구간을 동적으로 계산할 수 있기 때문에 따로 저장할 필요가 없다. <strong>구간 트리의 <u>루트부터</u></strong> <code class=\"language-text\">init()</code> 함수 내의 다음 과정을 진행한다.</p>\n<ul>\n<li><strong><u>노드가 나타내는 구간의 시작과 끝이 같을 때</u></strong>: 구간 합이 가리키는 숫자의 값이기 때문에, <strong>해당 숫자를 구간합으로 저장하고 반환</strong>한다.</li>\n<li><strong><u>그 외</u></strong>: <strong>구간을 반으로 나눠 각 구간의 숫자 합을 재귀적으로 구한 후, 둘을 합쳐 해당 구간의 숫자 합을 구한다</strong>.</li>\n</ul>\n<p>다음 그림은 예제 입력 1의 숫자들로 구간 트리에 숫자들의 구간 합을 저장한 결과이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/62008b033bb3116d46bbb576a392d97f/d2782/boj_2042_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABpklEQVQoz42T626bQBCF/f6P0x+N0kpNVVVqpLRy3PoSbAzLco25GOzGEBv4MuAoVtIo6UiHy87MOXN2YdC2LW9BLhh5w0zAO7UdBq+ScEK5r7mcKq5uFLv7+lnuXcLmkSzfg1fSR1Fk2FbKfJ72z11oyRUH+trmLULapm/4Zd3ydaoJVymebWIuHeYLB08tCWTty0QzVPFRUXpeJezUNnJL/u7QKpSJfJR2yCVzX5U91qJnOYqF5BypyXYVRcMz+0+EddPy3V5zMbaFTGOaPj8Nh4+ziG1Vs5fGD5NbrgzFchliysRnwwXnN7HYPpEO6KeDsrwTay6TmYXnKbabNaPfY0wrIggjVquYuRlwPZqS57IVnsYQctv2yYvi6L6fsGnw7uCbFWOrCNdNOV/E5KLja4WjN2itccX+Kq6EwO2bt9tufYUl+73O0hNhLY0zIfn045rhnzEzw+Dz5QgVJlRlSRgFHA6HHq6r2WyO03SRCVGSxI9nwMmyJ5MURdfgiapDHO/lU1FPhS/jdJD/rg26lzCK0K4vaomoZignwA+C//ozXuIBbNpK3jdhJ9AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"boj_2042_2.png\"\n        title=\"boj_2042_2.png\"\n        src=\"/static/62008b033bb3116d46bbb576a392d97f/fcda8/boj_2042_2.png\"\n        srcset=\"/static/62008b033bb3116d46bbb576a392d97f/12f09/boj_2042_2.png 148w,\n/static/62008b033bb3116d46bbb576a392d97f/e4a3f/boj_2042_2.png 295w,\n/static/62008b033bb3116d46bbb576a392d97f/fcda8/boj_2042_2.png 590w,\n/static/62008b033bb3116d46bbb576a392d97f/efc66/boj_2042_2.png 885w,\n/static/62008b033bb3116d46bbb576a392d97f/c83ae/boj_2042_2.png 1180w,\n/static/62008b033bb3116d46bbb576a392d97f/d2782/boj_2042_2.png 1864w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"2-구간-합-출력\" style=\"position:relative;\">[2] 구간 합 출력<a href=\"#2-%EA%B5%AC%EA%B0%84-%ED%95%A9-%EC%B6%9C%EB%A0%A5\" aria-label=\"2 구간 합 출력 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>구간 트리에서 원하는 구간의 숫자 합을 어떻게 구할 수 있을까? 다음 그림은 예제 입력 1에서 2번 노드부터 5번 노드까지의 합을 어떻게 구하는지 나타낸 그림이다. 문제에서는 노드 번호가 1번부터 시작하는데, 필자는 0번부터 시작하도록 구현했기 때문에 1번 노드부터 4번 노드까지의 합을 구하면 된다. <strong>[1, 4] 구간을 <u>구간 트리의 노드들이 나타내는 구간들로 최소한으로 나누면</u> [1, 1], [2, 2], [3, 4]</strong>이다. <strong>뒤의 <u>세 구간의 구간합을 더하면</u> [1, 4]의 구간합을 구할 수 있다.</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c216d9b9ad5de16b9fe97ff2d19f7254/d2782/boj_2042_3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABrUlEQVQoz4WTW2/aQBCF+f+/p31JHlq1VdMqbUkbLrVjvPbuYsAYsAlXw/rrYGiQkiiMdNYre+acublRVRVvQQ683NEVcMH3gMarJJyxLvd860TcehGr7Z6jVcfzEqE7keUl2PUxtCimBEFGq53V94MNlo5F6Wpf9xYhlasDfoQjPnY0g3SCVYEQxvh+jI4VRb+P/fyV2Z/7U7LudcKD2lwe2WKFjgb4niU0mkNO2+2G7WbNTPSCWDP0PVIVkq1KCndswQvCvav4omZ8aIUEko0fDLDNJg83v6TunJWIvWsP+e5pRsED1vd53+xx9TeVss+kDapjg9frJUFP0+oq4r4hfyzoCmHebTNKEkbjsYgk3P1uM8lnmL7F8xRKJeRF8TSkRuUcdgmfwjFhNGIQp9y2epQyGK1jchWhjcHIPR1vCJWpgxePc/meEkq/Z9PJmXAvCXbNhKubO37ed+h1WnjX1+SRYrXZkAyH7Ha7GkZ6Op8X/LepEGXZ+DQDziVbHclK7LDGEmtDmWVSinpyfG7nQb5816j3SrLQpi9qmahOSaKIRNaj4vKf8Rz/AONhSpWPjP4bAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"boj_2042_3.png\"\n        title=\"boj_2042_3.png\"\n        src=\"/static/c216d9b9ad5de16b9fe97ff2d19f7254/fcda8/boj_2042_3.png\"\n        srcset=\"/static/c216d9b9ad5de16b9fe97ff2d19f7254/12f09/boj_2042_3.png 148w,\n/static/c216d9b9ad5de16b9fe97ff2d19f7254/e4a3f/boj_2042_3.png 295w,\n/static/c216d9b9ad5de16b9fe97ff2d19f7254/fcda8/boj_2042_3.png 590w,\n/static/c216d9b9ad5de16b9fe97ff2d19f7254/efc66/boj_2042_3.png 885w,\n/static/c216d9b9ad5de16b9fe97ff2d19f7254/c83ae/boj_2042_3.png 1180w,\n/static/c216d9b9ad5de16b9fe97ff2d19f7254/d2782/boj_2042_3.png 1864w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><strong>구간 트리의 <u>루트부터</u></strong> <code class=\"language-text\">query()</code> 함수 내의 다음 과정을 진행하면 위의 방법대로 원하는 구간의 숫자 합을 구할 수 있다.</p>\n<ul>\n<li><strong><u>원하는 구간이 노드가 나타내는 범위 밖일 때</u></strong>: 해당 구간합을 포함하면 안 되므로 <strong>0을 반환</strong>한다.</li>\n<li><strong><u>원하는 구간과 노드가 나타내는 구간의 교집합이 노드가 나타내는 구간일 때</u></strong>: 구간트리에서 <strong>노드가 나타내는 범위의 구간 합을 반환</strong>한다.</li>\n<li><strong><u>그 외</u></strong>: <strong>구간을 반으로 나눠 각 구간의 숫자 합을 재귀적으로 구한 후, 둘을 합쳐 해당 구간의 숫자 합을 구한다</strong>.</li>\n</ul>\n<h3 id=\"3-숫자-변경에-따른-구간합-갱신\" style=\"position:relative;\">[3] 숫자 변경에 따른 구간합 갱신<a href=\"#3-%EC%88%AB%EC%9E%90-%EB%B3%80%EA%B2%BD%EC%97%90-%EB%94%B0%EB%A5%B8-%EA%B5%AC%EA%B0%84%ED%95%A9-%EA%B0%B1%EC%8B%A0\" aria-label=\"3 숫자 변경에 따른 구간합 갱신 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>문제에서 수를 변경하고 구간합을 구해야 하는 경우가 있기 때문에, <strong><u>수를 변경한다면 해당 숫자를 포함하는 구간의 숫자합을 갱신</u></strong>해주어야 한다.</p>\n<p>다음 그림은 예제 입력 1에서 3번 노드(풀이에서는 2번 노드)의 숫자를 6으로 변경함에 따라 바뀐 구간합들을 어떻게 갱신하는지 나타낸 그림이다. <strong><u>구간 트리에서 변경된 숫자의 인덱스를 나타내는 리프를 찾아 그 값을 변경된 숫자로 갱신하고, 루트에 도달할 때까지 부모 노드로 올라가며 각 노드의 부분합 또한 갱신</u></strong>한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5db020d3c8d83ccd1a495ac18f968aea/60c1e/boj_2042_4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.4054054054054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABsUlEQVQoz4WTfY+aQBCH/f5fp0mTXtP+0eRiLzHH2eh5KPKyICCgvBhBq/B0AHOtzZ03yYTdWeb5zQzLoGka3nXE6jNhVBCs827dxm7lDN4K9tYDm6okeHjAH41oyrIXaer+/CNg3cEa9scz0b7usElRkBgGyXTSrVtTFeSnXrS+BeyVIdWe8O+HFP4Kx7ZQAnR0Hdc2CaIN36cKzYkvjdSX3P+ArdpOHtH+SCyQQH/BUB5bOTkcj+IHUtEz5Wwxb4UCtuWBvOaq/VfguW64t1K+TWzUfI4vVSltzGL4KP1llCL2abpmpNsslwHGwuGzZnCnx/RjvwAvOyoZvrF0eZ6ZuJ4i2xXMNI1sNmXt+6zjmLnh8zR+Jss2ePKOLnDLWpEXed99V2Fd4+3hhxljWiGuu+HLIiITHU85pJZU7LoSd4jigwDcLnkngkpFLM2QNN38BZ4lcSaQu+GYx18TXmT4X3+OsYOEQ1XhhyGn06lz11UUly/d2na7IUni16vWtyy9e8omz9sET1Qd4vg3lmn/cyev7fq+XscG7SaUKpRaiVoi5W+xnRUrmdvNv+gd/wPJuEqb4DppKAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"boj_2042_4.png\"\n        title=\"boj_2042_4.png\"\n        src=\"/static/5db020d3c8d83ccd1a495ac18f968aea/fcda8/boj_2042_4.png\"\n        srcset=\"/static/5db020d3c8d83ccd1a495ac18f968aea/12f09/boj_2042_4.png 148w,\n/static/5db020d3c8d83ccd1a495ac18f968aea/e4a3f/boj_2042_4.png 295w,\n/static/5db020d3c8d83ccd1a495ac18f968aea/fcda8/boj_2042_4.png 590w,\n/static/5db020d3c8d83ccd1a495ac18f968aea/efc66/boj_2042_4.png 885w,\n/static/5db020d3c8d83ccd1a495ac18f968aea/c83ae/boj_2042_4.png 1180w,\n/static/5db020d3c8d83ccd1a495ac18f968aea/60c1e/boj_2042_4.png 1866w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><strong>구간 트리의 <u>루트부터</u></strong> <code class=\"language-text\">update()</code> 함수 내의 다음 과정을 진행하면 위의 방법대로 변경된 숫자를 포함하는 구간들의 숫자합을 갱신할 수 있다.</p>\n<ul>\n<li><strong><u>변경된 숫자의 위치가 노드가 나타내는 범위 밖일 때</u></strong>: <strong>갱신할 필요가 없으니 기존의 구간합을 반환</strong>한다.</li>\n<li><strong><u>변경된 숫자의 위치와 노드가 나타내는 범위가 같을 때</u></strong>: <strong>변경된 숫자의 값을 반환</strong>한다.</li>\n<li><strong><u>그 외</u></strong>: <strong>구간을 반으로 나눠 각 구간의 갱신된 숫자 합을 재귀적으로 구한 후, 둘을 합쳐 해당 구간의 숫자 합을 구한다</strong>.</li>\n</ul>\n<h2 id=\"구현\" style=\"position:relative;\">구현<a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>아래 코드 + 설명 있습니당</p>\n<h3 id=\"코드\" style=\"position:relative;\">코드<a href=\"#%EC%BD%94%EB%93%9C\" aria-label=\"코드 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> input <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">strToNumArr</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> str<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>Number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">RangeSumTree</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">numbers</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>n <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function-variable function\">init</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">numbers<span class=\"token punctuation\">,</span> nodeIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> rangeStart <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> rangeEnd <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rangeStart <span class=\"token operator\">===</span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum<span class=\"token punctuation\">[</span>nodeIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">[</span>rangeStart<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>rangeStart <span class=\"token operator\">+</span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> leftRangeSum <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">,</span> nodeIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> rangeStart<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> rightRangeSum <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>\n      numbers<span class=\"token punctuation\">,</span>\n      nodeIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      rangeEnd\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum<span class=\"token punctuation\">[</span>nodeIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> leftRangeSum <span class=\"token operator\">+</span> rightRangeSum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function-variable function\">query</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">from</span><span class=\"token punctuation\">,</span> to<span class=\"token punctuation\">,</span> nodeIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> rangeStart <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> rangeEnd <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">from</span> <span class=\"token operator\">></span> rangeEnd <span class=\"token operator\">||</span> to <span class=\"token operator\">&lt;</span> rangeStart<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">from</span> <span class=\"token operator\">&lt;=</span> rangeStart <span class=\"token operator\">&amp;&amp;</span> to <span class=\"token operator\">>=</span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum<span class=\"token punctuation\">[</span>nodeIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>rangeStart <span class=\"token operator\">+</span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> leftRangeSum <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">from</span><span class=\"token punctuation\">,</span>\n      to<span class=\"token punctuation\">,</span>\n      nodeIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      rangeStart<span class=\"token punctuation\">,</span>\n      mid\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> rightRangeSum <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">from</span><span class=\"token punctuation\">,</span>\n      to<span class=\"token punctuation\">,</span>\n      nodeIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      rangeEnd\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> leftRangeSum <span class=\"token operator\">+</span> rightRangeSum<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function-variable function\">update</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\">numIndex<span class=\"token punctuation\">,</span>\n    newNum<span class=\"token punctuation\">,</span>\n    nodeIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    rangeStart <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    rangeEnd <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span></span>\n  <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>numIndex <span class=\"token operator\">&lt;</span> rangeStart <span class=\"token operator\">||</span> numIndex <span class=\"token operator\">></span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum<span class=\"token punctuation\">[</span>nodeIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rangeStart <span class=\"token operator\">===</span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum<span class=\"token punctuation\">[</span>nodeIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> newNum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>rangeStart <span class=\"token operator\">+</span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> leftRangeSum <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>\n      numIndex<span class=\"token punctuation\">,</span>\n      newNum<span class=\"token punctuation\">,</span>\n      nodeIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      rangeStart<span class=\"token punctuation\">,</span>\n      mid\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> rightRangeSum <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>\n      numIndex<span class=\"token punctuation\">,</span>\n      newNum<span class=\"token punctuation\">,</span>\n      nodeIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      rangeEnd\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum<span class=\"token punctuation\">[</span>nodeIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> leftRangeSum <span class=\"token operator\">+</span> rightRangeSum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'readline'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">createInterface</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>stdin<span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'line'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">line</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    input<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'close'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> inputIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span><span class=\"token constant\">N</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">M</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">strToNumArr</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">[</span>inputIndex<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token constant\">N</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">[</span>inputIndex<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> rangeSumTree <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RangeSumTree</span><span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> t <span class=\"token operator\">=</span> <span class=\"token constant\">M</span> <span class=\"token operator\">+</span> <span class=\"token constant\">K</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>t<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>operationNum<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">strToNumArr</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">[</span>inputIndex<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>operationNum <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        rangeSumTree<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>b <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>rangeSumTree<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>b <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> c <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"코드설명\" style=\"position:relative;\">코드+설명<a href=\"#%EC%BD%94%EB%93%9C%EC%84%A4%EB%AA%85\" aria-label=\"코드설명 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> input <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">strToNumArr</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> str<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>Number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//구간 별 숫자 합을 저장하는 트리</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">RangeSumTree</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">numbers</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//숫자 개수</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>n <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//nodeIndex번 노드가 나타내는 숫자 범위</span>\n    <span class=\"token comment\">//rangeStart ~ rangeEnd의 숫자 합을 저장하는 트리.</span>\n    <span class=\"token comment\">//크기를 4n으로 초기화</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//numbers 참고해서 트리에 구간 별 숫자 합 저장</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">//nodeIndex번 노드가 나타내는 숫자 범위는 rangeStart ~ rangeEnd</span>\n  <span class=\"token comment\">//해당 구간의 숫자 합을 반환.</span>\n  <span class=\"token function-variable function\">init</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">numbers<span class=\"token punctuation\">,</span> nodeIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> rangeStart <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> rangeEnd <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//노드가 나타내는 범위의 시작과 끝이 같으면</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rangeStart <span class=\"token operator\">===</span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//rangeSum = 범위가 가리키는 숫자</span>\n      <span class=\"token comment\">//rangeSum의 nodeIndex 위치에 숫자를 저장하고 반환.</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum<span class=\"token punctuation\">[</span>nodeIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">[</span>rangeStart<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//아니면 해당 구간을 반으로 나눠 해당 구간의 숫자의 합을 재귀적으로 구함.</span>\n    <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>rangeStart <span class=\"token operator\">+</span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> leftRangeSum <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">,</span> nodeIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> rangeStart<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> rightRangeSum <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>\n      numbers<span class=\"token punctuation\">,</span>\n      nodeIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      rangeEnd\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum<span class=\"token punctuation\">[</span>nodeIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> leftRangeSum <span class=\"token operator\">+</span> rightRangeSum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">//합을 구하고자 하는 구간의 범위는 from ~ to</span>\n  <span class=\"token comment\">//nodeIndex번 노드가 나타내는 숫자 범위는 rangeStart ~ rangeEnd</span>\n  <span class=\"token comment\">//rangeStart ~ rangeEnd, from ~ to의 교집합 구간의 숫자 합 반환</span>\n  <span class=\"token function-variable function\">query</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">from</span><span class=\"token punctuation\">,</span> to<span class=\"token punctuation\">,</span> nodeIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> rangeStart <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> rangeEnd <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//구하고자 하는 구간이 노드가 나타내는 범위 밖일 때</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">from</span> <span class=\"token operator\">></span> rangeEnd <span class=\"token operator\">||</span> to <span class=\"token operator\">&lt;</span> rangeStart<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//구간들의 교집합이 rangeStart ~ rangeEnd일 때</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">from</span> <span class=\"token operator\">&lt;=</span> rangeStart <span class=\"token operator\">&amp;&amp;</span> to <span class=\"token operator\">>=</span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//노드가 나타내는 범위의 구간 합 반환</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum<span class=\"token punctuation\">[</span>nodeIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//그 외에는 노드가 나타내는 구간을 반으로 나눠 구간 숫자 합을 재귀적으로 구함.</span>\n    <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>rangeStart <span class=\"token operator\">+</span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> leftRangeSum <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">from</span><span class=\"token punctuation\">,</span>\n      to<span class=\"token punctuation\">,</span>\n      nodeIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      rangeStart<span class=\"token punctuation\">,</span>\n      mid\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> rightRangeSum <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">from</span><span class=\"token punctuation\">,</span>\n      to<span class=\"token punctuation\">,</span>\n      nodeIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      rangeEnd\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> leftRangeSum <span class=\"token operator\">+</span> rightRangeSum<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">//numIndex번 숫자의 값을 newNum으로 변경,</span>\n  <span class=\"token comment\">//numIndex가 포함된 구간의 구간 합 값을 갱신</span>\n  <span class=\"token comment\">//nodeIndex번 노드가 나타내는 숫자 범위는 rangeStart ~ rangeEnd</span>\n  <span class=\"token comment\">//갱신 후 구간 합 반환</span>\n  <span class=\"token function-variable function\">update</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\">numIndex<span class=\"token punctuation\">,</span>\n    newNum<span class=\"token punctuation\">,</span>\n    nodeIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    rangeStart <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    rangeEnd <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span></span>\n  <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//numIndex 위치가 구간에 포함 안 될 때</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>numIndex <span class=\"token operator\">&lt;</span> rangeStart <span class=\"token operator\">||</span> numIndex <span class=\"token operator\">></span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//갱신할 필요 없으므로 기존 구간 합 반환</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum<span class=\"token punctuation\">[</span>nodeIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//노드가 나타내는 범위의 시작과 끝이 같으면</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rangeStart <span class=\"token operator\">===</span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//rangeSum = 범위가 가리키는 숫자</span>\n      <span class=\"token comment\">//rangeSum의 nodeIndex 위치의 숫자 newNum으로 변경 후 반환.</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum<span class=\"token punctuation\">[</span>nodeIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> newNum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//아니면 해당 구간을 반으로 나눠 해당 구간의 숫자의 합을 재귀적으로 갱신.</span>\n    <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>rangeStart <span class=\"token operator\">+</span> rangeEnd<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> leftRangeSum <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>\n      numIndex<span class=\"token punctuation\">,</span>\n      newNum<span class=\"token punctuation\">,</span>\n      nodeIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      rangeStart<span class=\"token punctuation\">,</span>\n      mid\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> rightRangeSum <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>\n      numIndex<span class=\"token punctuation\">,</span>\n      newNum<span class=\"token punctuation\">,</span>\n      nodeIndex <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      rangeEnd\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rangeSum<span class=\"token punctuation\">[</span>nodeIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> leftRangeSum <span class=\"token operator\">+</span> rightRangeSum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'readline'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">createInterface</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>stdin<span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'line'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">line</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    input<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'close'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> inputIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span><span class=\"token constant\">N</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">M</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">strToNumArr</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">[</span>inputIndex<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token constant\">N</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">[</span>inputIndex<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> rangeSumTree <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RangeSumTree</span><span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> t <span class=\"token operator\">=</span> <span class=\"token constant\">M</span> <span class=\"token operator\">+</span> <span class=\"token constant\">K</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>t<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>operationNum<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">strToNumArr</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">[</span>inputIndex<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>operationNum <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        rangeSumTree<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>b <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>rangeSumTree<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>b <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> c <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","fields":{"slug":"/boj/2042/"},"tableOfContents":"<ul>\n<li>\n<p><a href=\"/boj/2042/#%EB%AC%B8%EC%A0%9C\">문제</a></p>\n<ul>\n<li>\n<p><a href=\"/boj/2042/#%EC%9E%85%EB%A0%A5\">입력</a></p>\n<ul>\n<li><a href=\"/boj/2042/#%EC%98%88%EC%A0%9C-%EC%9E%85%EB%A0%A5-1\">예제 입력 1</a></li>\n</ul>\n</li>\n<li><a href=\"/boj/2042/#%EC%B6%9C%EB%A0%A5\">출력</a></li>\n<li><a href=\"/boj/2042/#%EC%A0%9C%ED%95%9C\">제한</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/boj/2042/#%ED%92%80%EC%9D%B4\">풀이</a></p>\n<ul>\n<li><a href=\"/boj/2042/#%EC%A0%91%EA%B7%BC\">접근</a></li>\n<li>\n<p><a href=\"/boj/2042/#%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98\">알고리즘</a></p>\n<ul>\n<li><a href=\"/boj/2042/#1-%EA%B5%AC%EA%B0%84-%ED%8A%B8%EB%A6%AC-%EC%83%9D%EC%84%B1\">1 구간 트리 생성</a></li>\n<li><a href=\"/boj/2042/#2-%EA%B5%AC%EA%B0%84-%ED%95%A9-%EC%B6%9C%EB%A0%A5\">2 구간 합 출력</a></li>\n<li><a href=\"/boj/2042/#3-%EC%88%AB%EC%9E%90-%EB%B3%80%EA%B2%BD%EC%97%90-%EB%94%B0%EB%A5%B8-%EA%B5%AC%EA%B0%84%ED%95%A9-%EA%B0%B1%EC%8B%A0\">3 숫자 변경에 따른 구간합 갱신</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/boj/2042/#%EA%B5%AC%ED%98%84\">구현</a></p>\n<ul>\n<li><a href=\"/boj/2042/#%EC%BD%94%EB%93%9C\">코드</a></li>\n<li><a href=\"/boj/2042/#%EC%BD%94%EB%93%9C%EC%84%A4%EB%AA%85\">코드+설명</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"백준 2042번 구간 합 구하기 - node.js","date":"2021-02-23T13:21:24+00:00","description":"백준 2042번 구간 합 구하기를 javascript로 풀이하는 글입니다.","tags":["백준","JavaScript","세그먼트트리"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVQoz7WSW0sDMRCF9/8/+isE9UHEF8EHRZ8EFbTQ4gWqD9tds5vJXrtJZo9JXLS22iJq4DC5zHyTQxL1fY+/VPTvwJ+OtUA/iAhCCEgpUbh5UnZQrUFVFuFMKQWZ58gkgRq9Al0BFoUKQF8cxzPE1OCFSijpIJkIUiQhSblG3wDdFiz3mBvG3H7YZmuhjYHWGk1nUbWdmxuwy3XLEI1l8MAIQB5uFqsOWyfP2L5McDFV2L1OsX8jwjotNSZJjcNRhoNbgT13dv5I2LlKQ940a98usGw5KTrMnKgxIT7lLc4eCHdpjVFcYeygvrHP827yWkNUGq3md+vRphc+nuQ4GntlOL2XweK61/4E5EH9QvyqkH/zsXmp0Sa9AnG6WkNs5lMEAAAAAElFTkSuQmCC","aspectRatio":1.7751479289940828,"src":"/static/e34b01e66180675b716fcc52989f7903/f3583/boj_2042.png","srcSet":"/static/e34b01e66180675b716fcc52989f7903/630fb/boj_2042.png 300w,\n/static/e34b01e66180675b716fcc52989f7903/2a4de/boj_2042.png 600w,\n/static/e34b01e66180675b716fcc52989f7903/f3583/boj_2042.png 1200w,\n/static/e34b01e66180675b716fcc52989f7903/bbee5/boj_2042.png 1800w,\n/static/e34b01e66180675b716fcc52989f7903/ddca0/boj_2042.png 2292w","sizes":"(max-width: 1200px) 100vw, 1200px"}}}}}},"pageContext":{"slug":"/boj/2042/","previous":{"fields":{"slug":"/algorithm/1/"},"frontmatter":{"title":"이진 검색 트리와 힙"}},"next":{"fields":{"slug":"/boj/5052/"},"frontmatter":{"title":"백준 5052번 전화번호 목록 - node.js"}}}},"staticQueryHashes":["3000541721","3274528899","3384690500"]}