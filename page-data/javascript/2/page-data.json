{"componentChunkName":"component---src-templates-blog-post-index-tsx","path":"/javascript/2/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://gywlsp.github.io"}},"markdownRemark":{"id":"52442f12-376a-5603-818f-bc8bdf32dace","excerpt":"이 글은 JavaScript의 동작을 이해하는 데에 필수적인 개념, 스코프와 클로저에 대해 설명한다. MDN 클로저 문서와 책 속깊은 JavaScript…","html":"<blockquote>\n<p>이 글은 JavaScript의 동작을 이해하는 데에 필수적인 개념, 스코프와 클로저에 대해 설명한다. <a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Closures\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">MDN 클로저 문서</a>와 책 속깊은 JavaScript의 내용의 일부를 요약, 정리하여 글을 작성했다.</p>\n</blockquote>\n<h1 id=\"스코프란\" style=\"position:relative;\">스코프란?<a href=\"#%EC%8A%A4%EC%BD%94%ED%94%84%EB%9E%80\" aria-label=\"스코프란 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p><strong><u>스코프</u>란 <u>현재 접근할 수 있는 변수들의 범위</u></strong>를 뜻한다.</p>\n<h2 id=\"스코프의-생성\" style=\"position:relative;\">스코프의 생성<a href=\"#%EC%8A%A4%EC%BD%94%ED%94%84%EC%9D%98-%EC%83%9D%EC%84%B1\" aria-label=\"스코프의 생성 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"let이-등장하기-이전\" style=\"position:relative;\">let이 등장하기 이전<a href=\"#let%EC%9D%B4-%EB%93%B1%EC%9E%A5%ED%95%98%EA%B8%B0-%EC%9D%B4%EC%A0%84\" aria-label=\"let이 등장하기 이전 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>ES6 문법에 <code class=\"language-text\">let</code>이 추가되기 전, 자바스크립트는 다른 언어와는 달리 일반적인 블록 스코프를 따르지 않았다. <strong><u>다음 구문들을 사용할 때에만 스코프가 생성</u></strong>되었다.</p>\n<ul>\n<li><code class=\"language-text\">function</code></li>\n<li><code class=\"language-text\">with</code></li>\n<li><code class=\"language-text\">catch</code></li>\n</ul>\n<p><code class=\"language-text\">function</code> 구문을 사용하면 <strong><u>함수 외부에서 내부에 선언된 변수에 접근할 수 없고</u></strong>, <code class=\"language-text\">with</code>와 <code class=\"language-text\">catch</code> 구문은 <strong>괄호 안에 인자로 받는 변수들만 새로운 내부 스코프에 포함되어 그 다음으로 오는 블록 안에서만 접근</strong>할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//function 구문</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token string\">'hi'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> a <span class=\"token operator\">===</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//catch 구문</span>\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">exception</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fake exception'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> test <span class=\"token operator\">=</span> <span class=\"token string\">'can you see me'</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">ReferenceError</span> <span class=\"token operator\">===</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>test <span class=\"token operator\">===</span> <span class=\"token string\">'can you see me'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> err <span class=\"token operator\">===</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//with 구문</span>\n<span class=\"token keyword\">with</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> inScope<span class=\"token operator\">:</span> <span class=\"token string\">\"You can't see me\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> notInScope <span class=\"token operator\">=</span> <span class=\"token string\">'But you can see me'</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>inScope <span class=\"token operator\">===</span> <span class=\"token string\">\"You can't see me\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> inScope <span class=\"token operator\">===</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>notInScope <span class=\"token operator\">===</span> <span class=\"token string\">'But you can see me'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span></code></pre></div>\n<p>+) <a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/with\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">with 구문</a>은 자바스크립트 구문 중 <code class=\"language-text\">eval</code> 구문과 함께 사용하지 말아야 할 구문 중 하나이다.</p>\n<h3 id=\"let의-등장\" style=\"position:relative;\">let의 등장<a href=\"#let%EC%9D%98-%EB%93%B1%EC%9E%A5\" aria-label=\"let의 등장 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><code class=\"language-text\">let</code>이 등장하면서 <strong><u>javascript에서도 블록 스코프를 이용할 수 있게 되었다</u></strong>. 블록 스코프를 구분하는 블록문은 한쌍의 중괄호로 구성되며 선택적으로 이름을 붙일 수 있다. <code class=\"language-text\">let</code>으로 선언된 변수는 <strong>블록 밖에서 접근할 수 없고</strong>, <code class=\"language-text\">var</code>은 <strong>여전히 블록과 상관 없이 자신의 정의를 유지</strong>해 기존에 만들어진 웹페이지들이 계속 동작하도록 하고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//2</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//1</span></code></pre></div>\n<h2 id=\"스코프의-지속성\" style=\"position:relative;\">스코프의 지속성<a href=\"#%EC%8A%A4%EC%BD%94%ED%94%84%EC%9D%98-%EC%A7%80%EC%86%8D%EC%84%B1\" aria-label=\"스코프의 지속성 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>엄밀히 따져보면 javascript에서 스코프가 생성되는 방식이 기존 언어들과 다르지는 않지만, <strong><u>스코프가 지속되는 것은 다른 언어들과는 다른 javascript만의 강점</u></strong> 중 하나이다.</p>\n<p><strong>자바스크립트에서 스코프 지속성이 필요한 이유는, 새로운 스코프가 생성된 후 스코프 체인을 참조하는 함수를 변수에 넣을 수도 있고, 다른 함수의 인자로 넘겨줄 수도 있으며, 함수의 반환값으로 활용할 수도 있기 때문</strong>이다. 즉, 지금 <strong><u>함수가 선언된 곳이 아니라 다른 곳에서 함수가 호출될 수도 있어 해당 함수가 현재 참조하는 스코프를 지속할 필요가 있는 것</u></strong>이다.</p>\n<h1 id=\"클로저란\" style=\"position:relative;\">클로저란?<a href=\"#%ED%81%B4%EB%A1%9C%EC%A0%80%EB%9E%80\" aria-label=\"클로저란 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p><strong>자바스크립트에서는 특정 함수가 참조하는 변수들이 선언된 어휘적 환경(Lexical scope)이 계속 유지되는데, <u>그 함수와 스코프</u></strong>를 묶어서 <strong><u>클로저</u></strong>라고 한다. 여기서 “lexical”이란, 변수가 소스코드 내 어디에서 선언되었는지 고려한다는 사실을 의미한다. <strong>스코프가 중첩되었을 때에는 내부 스코프에서 외부 스코프에서 선언된 변수에도 접근할 수 있다</strong>.</p>\n<h2 id=\"클로저-쉽게-이해하기\" style=\"position:relative;\">클로저 쉽게 이해하기<a href=\"#%ED%81%B4%EB%A1%9C%EC%A0%80-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0\" aria-label=\"클로저 쉽게 이해하기 permalink\" class=\"anchor-header after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><strong><u>클로저가 나타나는 가장 기본적인 환경은 스코프 안에 스코프가 있을 때</u></strong>이다. 아래 소스가 실행됨에 따라 스코프 체인이 내부적으로 어떻게 구성되는지 살펴보면서 클로저를 이해해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">base</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> inClosure <span class=\"token operator\">=</span> base<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">adder</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> inClosure <span class=\"token operator\">+</span> adder<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> fiveAdder <span class=\"token operator\">=</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//inClosure = 5 and return function</span>\n<span class=\"token function\">fiveAdder</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//5(inClosure) + 3(adder) === 8</span>\n<span class=\"token keyword\">var</span> threeAdder <span class=\"token operator\">=</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//inClosure = 3 and return function</span></code></pre></div>\n<p>외부에서 <code class=\"language-text\">sum()</code> 함수를 호출하면 파라미터 <code class=\"language-text\">base</code>를 통해서 넘어온 값은 <code class=\"language-text\">inClosure</code> 변수에 저장된다. 그리고 내부함수에서는 <code class=\"language-text\">inClosure</code> 변수를 참조한다. 이와 같은 소스코드가 실행될 때의 스코프 체인 구조를 미리 나타내면 다음과 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e4b95ebdc0ceee00859c3f51ad96a582/d9ed5/javascript_2_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.72972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA8UlEQVQY01VQi46DMAzj//9yJzENaMdW6OgzPqcd6A6RSonjxPEACEoRhCg4DkFKgloFIj1yBkKQFqXgqv/lhIjG0VmDAjkLjAXmBdh35qWDiqVUMRtgsT0vX0yHGdammZipl5BBFWQ+M6fdbj/Yt415wXNFa4oxYFkMXq83cor4fARuAwdnOOcwjneK2BuHfx+YUsa6rpgeE7zfmRe8HZryEA5Y+yR5Yz20gYrVWogF9nsujVxQmz2D+hJiIcly29iIMdZ2ljZ4f1DhDGMM/UrXySnh30dN/eTTKyVzyeWF1tV8zbstXbE0qPcodsbJ+QV5ldWWoOTrkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"javascript_2_1\"\n        title=\"javascript_2_1\"\n        src=\"/static/e4b95ebdc0ceee00859c3f51ad96a582/fcda8/javascript_2_1.png\"\n        srcset=\"/static/e4b95ebdc0ceee00859c3f51ad96a582/12f09/javascript_2_1.png 148w,\n/static/e4b95ebdc0ceee00859c3f51ad96a582/e4a3f/javascript_2_1.png 295w,\n/static/e4b95ebdc0ceee00859c3f51ad96a582/fcda8/javascript_2_1.png 590w,\n/static/e4b95ebdc0ceee00859c3f51ad96a582/efc66/javascript_2_1.png 885w,\n/static/e4b95ebdc0ceee00859c3f51ad96a582/c83ae/javascript_2_1.png 1180w,\n/static/e4b95ebdc0ceee00859c3f51ad96a582/d9ed5/javascript_2_1.png 2880w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>위 그림은 <code class=\"language-text\">sum()</code> 함수가 실제로 호출되었을 때를 가정하여 스코프가 생성되는 구조를 보인 것이다. 스코프의 뼈대, 혹은 템플릿이라고 보면 된다. 그럼 위의 템플릿을 토대로 함수가 실행되는 과정을 한 줄씩 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> fiveAdder <span class=\"token operator\">=</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//inClosure = 5 and return function</span></code></pre></div>\n<p>7번 줄에서 <code class=\"language-text\">sum()</code> 함수가 호출되고 파라미터 <code class=\"language-text\">base</code>의 값은 5로 넘어와서 <code class=\"language-text\">inClosure</code> 변수의 값이 5로 설정된다. 그리고 <code class=\"language-text\">inClosure</code> 변수를 참조하는 내부 함수를 반환하여 <code class=\"language-text\">fiveAdder</code>에 저장한다. 현재 <code class=\"language-text\">fiveAdder</code>의 스코프 상황은 다음과 같을 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ea39aa56bda1f29f1ee5261fe27a91c7/d9ed5/javascript_2_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.513513513513516%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABNklEQVQoz31S7W6DMAzk/d9kb7I32L9Jq6BrKXSQkA+cxFc7XaYhTUPKl88+X450AOM4ZGZGIQdOQdZwWP8aSB4oqVZ3pTBiZGwbw3tGSkJYCjjvkAUkZyf5OwG5tJbCkZ/xTYazhORMjXc5M4xhfF6A+5cWijppwilWsiL4eENtmtI3xk8R45hxnYHT2zvG1xeUptCYBX3/IQkXZPKwa8B9iqKoYF0XXK9nWGOEkLCKENki0Q7vLIbhhD1uCG5Dzj+ERshumOYZtEeEULA5VZSEcMU0zbDWVkyv6QTLUh3jLrUSJ6rq1a5Op2VZMPS9KLnAB6reya2kIGOWJudhqDneU42rCK37/Smh2lcVUvUNVbIC6pHarwlaWH8OPc/tNeheY5T4gHUtoZndnk0jrU+oHM//YQ+BdXJf8xaFqwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"javascript_2_2\"\n        title=\"javascript_2_2\"\n        src=\"/static/ea39aa56bda1f29f1ee5261fe27a91c7/fcda8/javascript_2_2.png\"\n        srcset=\"/static/ea39aa56bda1f29f1ee5261fe27a91c7/12f09/javascript_2_2.png 148w,\n/static/ea39aa56bda1f29f1ee5261fe27a91c7/e4a3f/javascript_2_2.png 295w,\n/static/ea39aa56bda1f29f1ee5261fe27a91c7/fcda8/javascript_2_2.png 590w,\n/static/ea39aa56bda1f29f1ee5261fe27a91c7/efc66/javascript_2_2.png 885w,\n/static/ea39aa56bda1f29f1ee5261fe27a91c7/c83ae/javascript_2_2.png 1180w,\n/static/ea39aa56bda1f29f1ee5261fe27a91c7/d9ed5/javascript_2_2.png 2880w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>위의 스코프 템플릿에서 <code class=\"language-text\">fiveAdder</code>는 실제로 사용하게 되는 함수 A를 할당받게 되어 오른쪽의 A 함수를 가지고 있게 된다. 그리고 <strong><u>A가 반환될 때는 위와 같이 스코프 체인을 생성</u>하여 fiveAdder 함수가 호출될 때 이 스코프 체인을 사용</strong>하게 된다. <strong><code class=\"language-text\">fiveAdder</code>에서 할당받는 함수 A는 3번 줄에서 반환되고 있는 익명 함수</strong>이다.</p>\n<p>이제부터 <code class=\"language-text\">fiveAdder</code><strong>를 통해 함수를 호출하게 되면 위의 스코프 체인을 따르게 된다</strong>. 그림만 살펴보면 순환 구조로 되어있는 것 같지만, 모든 스코프 체인은 글로벌 영역에서 끝난다. 그리고 <strong>글로벌 영역에서 <code class=\"language-text\">fiveAdder</code>가 가지고 있는 것</strong>은 다시 A를 참조하는 스코프 체인이 아니라 <strong><u>함수 A에 대한 레퍼런스</u></strong>, C언어로 말하자면 포인터를 가지고 있는 것이다. <strong>JavaScript에서는 함수가 <a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Function\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Function 객체</a></strong>이기 때문이다. 이 함수 A가 사용하는 <strong>스코프 체인은 함수 A를 가리키는 레퍼런스가 사라질 때까지 계속 남아있게 되어 <u>스코프가 계속 유지</u></strong>된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">fiveAdder</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//5(inClosure) + 3(adder) === 8</span></code></pre></div>\n<p>이제 8번 줄의 <code class=\"language-text\">fiveAdder(3)</code>이 호출되면, 위의 스코프 체인에서 <code class=\"language-text\">inClosure</code>는 5를 가지고, 함수 A의 파라미터 <code class=\"language-text\">adder</code>로 들어온 값이 3을 더하여 8이라는 값이 반환된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> threeAdder <span class=\"token operator\">=</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//inClosure = 3 and return function</span></code></pre></div>\n<p>이번에 다시 <code class=\"language-text\">threeAdder</code>를 호출하게 되면 어떻게 될까? 위의 함수 A에 대한 스코프 체인에 영향을 미쳐서 <code class=\"language-text\">inClosure</code> 변수의 값을 3으로 덮어쓸 것 같지만 그렇지 않다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6e2ea6ab59f9eb8d13f737e3419bf784/ab3e6/javascript_2_3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABtElEQVQoz11S2VLDMBDL//8Sr7zDIwwzhTLQJnWu5vJtobVJOTxVbcderVbrKqUE/lDmHeBICAEZ6wrMC257OXMOuE4JwxVQpx7Xw6McoEolOo+fdSH2HoTDRc1Qasnr8k2Q0PUa758b6uMHxqd7BIZXO1Eh+5mtS1mBcwbD0GNdZjhrsG4JjZJ7EcZs6LoLVTu4ELP6SuI9qacZGEZgWYtG1SF/W9cFb29H1HWDhYc+IKOUHxAZH0S50YWwHMZc1vNLg7adEFnT+cxL1sNqc4MhgtQbfT6TdSCBtxZO6+KhEFo6rPWCvldUNEFvDqcTA8EAR1JTIGshS4Hg7KxjEkkcbt5XItMyW9e1OBwOaJoGPjp8NhaLZuZoMa0e7ehhvM2IsNioquksLrTm6fiOh9e7olD+HBtgTMjEmkpiFE+lixREcqUGtN2V9yzvJHpZbJpndrjuoVhZPbzuTUnfT6YYvb+cQFJaRgKTVY/jQFs2Jo7fiWLeS2XiLZuem1Xtj1rq37HvGYNtM2zQif72ucvOl4cv7/D3kJfyT2H6g0IsCumYLXaILZIkVxBStkpmId8TfAFDNVtoUgSS4AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"javascript_2_3\"\n        title=\"javascript_2_3\"\n        src=\"/static/6e2ea6ab59f9eb8d13f737e3419bf784/fcda8/javascript_2_3.png\"\n        srcset=\"/static/6e2ea6ab59f9eb8d13f737e3419bf784/12f09/javascript_2_3.png 148w,\n/static/6e2ea6ab59f9eb8d13f737e3419bf784/e4a3f/javascript_2_3.png 295w,\n/static/6e2ea6ab59f9eb8d13f737e3419bf784/fcda8/javascript_2_3.png 590w,\n/static/6e2ea6ab59f9eb8d13f737e3419bf784/efc66/javascript_2_3.png 885w,\n/static/6e2ea6ab59f9eb8d13f737e3419bf784/c83ae/javascript_2_3.png 1180w,\n/static/6e2ea6ab59f9eb8d13f737e3419bf784/ab3e6/javascript_2_3.png 1441w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>위와 같이 <code class=\"language-text\">sum()</code> 함수가 호출되면서 다시 3번 줄의 함수 표현식이 실행되면 함수 B는 <strong><u>새로운 스코프 체인을 생성</u></strong>하여, 이번에는 <code class=\"language-text\">threeAdder</code> 변수에 함수 B를 가리키는 레퍼런스를 넣는다. 이처럼 <strong>같은 함수를 통해서 받은 값은 각각 A와 B로 두 개의 함수가 생성되어, <u><code class=\"language-text\">fiveAdder</code>로 호출하면 A의 스코프 체인을 사용하고, <code class=\"language-text\">threeAdder</code>로 호출하면 B의 스코프 체인을 사용</u></strong>한다.</p>\n<p>이처럼 <strong><u>클로저를 통해서 각 함수는 자기만의 고유한 값을 보유하고 스코프 체인을 유지하면서 그 체인 안에 있는 모든 값들을 유지</u></strong>한다. <code class=\"language-text\">sum()</code> 함수를 호출할 때마다 같은 모양의 함수들이 매번 새롭게 나오지만, <strong>두 함수가 같지 않은 이유는 두 함수가 할당받은 스코프 체인, 숨겨져 있는 클로저가 다르기 때문</strong>이다.</p>","fields":{"slug":"/javascript/2/"},"tableOfContents":"<ul>\n<li>\n<p><a href=\"/javascript/2/#%EC%8A%A4%EC%BD%94%ED%94%84%EB%9E%80\">스코프란?</a></p>\n<ul>\n<li>\n<p><a href=\"/javascript/2/#%EC%8A%A4%EC%BD%94%ED%94%84%EC%9D%98-%EC%83%9D%EC%84%B1\">스코프의 생성</a></p>\n<ul>\n<li><a href=\"/javascript/2/#let%EC%9D%B4-%EB%93%B1%EC%9E%A5%ED%95%98%EA%B8%B0-%EC%9D%B4%EC%A0%84\">let이 등장하기 이전</a></li>\n<li><a href=\"/javascript/2/#let%EC%9D%98-%EB%93%B1%EC%9E%A5\">let의 등장</a></li>\n</ul>\n</li>\n<li><a href=\"/javascript/2/#%EC%8A%A4%EC%BD%94%ED%94%84%EC%9D%98-%EC%A7%80%EC%86%8D%EC%84%B1\">스코프의 지속성</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/javascript/2/#%ED%81%B4%EB%A1%9C%EC%A0%80%EB%9E%80\">클로저란?</a></p>\n<ul>\n<li><a href=\"/javascript/2/#%ED%81%B4%EB%A1%9C%EC%A0%80-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0\">클로저 쉽게 이해하기</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"JavaScript 스코프와 클로저","date":"2021-03-22T13:08:22+00:00","description":"이 글은 JavaScript의 동작을 이해하는 데에 필수적인 개념, 스코프와 클로저에 대해 설명한다.","tags":["JavaScript"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGElEQVQoz2P4ct8XjHy+3A/4et/m+32Z7/fl4OjbPRD6fl/+632XL/f9YYqhiAGPZpDO+3I/HwBJEjV/uSv346Hcl/tyr6/I/Hwo/4VIzV/uyP1/o9BbL7h4skhhKl9SBM+jMzI/H7t+vkek5o8KJZn8XbWC9pYcPXWCxPr5x33Zjzfl/79UKM3im9IqfO2gNFD/tHbh/+/cPt7xw6f5yz3rnw+l3l6TTonicrFlWzdXODeJ292RbckUof9vXPFoBiL/r/cdvt3X+vlI595JjVvH1P8/17lzTOPSfrXfT3W+3HP/ch+fZl+wtD8wYH4+CQCij3f9fz4O+PU04NNdf0ydmJoh7vf5fM/n010w4y6UgakTq2YSEADdGrUPlKh55AAAAABJRU5ErkJggg==","aspectRatio":1.7751479289940828,"src":"/static/7b8e01b8299a5ec508bacdece857236d/40ffe/thumbnail.png","srcSet":"/static/7b8e01b8299a5ec508bacdece857236d/630fb/thumbnail.png 300w,\n/static/7b8e01b8299a5ec508bacdece857236d/2a4de/thumbnail.png 600w,\n/static/7b8e01b8299a5ec508bacdece857236d/40ffe/thumbnail.png 960w","sizes":"(max-width: 960px) 100vw, 960px"}}}}}},"pageContext":{"slug":"/javascript/2/","previous":{"fields":{"slug":"/mysql/5/"},"frontmatter":{"title":"MySQL에서 테이블 inner join, outer join 하는 법"}},"next":{"fields":{"slug":"/tech/1/"},"frontmatter":{"title":"클라우드와 클라우드 컴퓨팅"}}}},"staticQueryHashes":["3000541721","3274528899","3384690500"]}